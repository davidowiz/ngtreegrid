<table class="db-tree-grid">
    <thead>
      <tr>
        <th class="clear-right-border" width="{{configs.group_by_width ? configs.group_by_width : 'auto'}}">
          {{configs.group_by_header}}</th>
        <th *ngFor="let column of columns" [ngClass]="{'sorted': column.sorted,'sortable': column.sortable}"         
            (click)="sortColumn(column)"
            width="{{column.width ? column.width : 'auto'}}">
            <span>{{column.header}}</span>
            <span *ngIf="column.sortable" [ngClass]="column.sorted && column.sort_type == 0?'arrow-down active':'arrow-down'"></span>
            <span *ngIf="column.sortable" [ngClass]="column.sorted && column.sort_type == 1?'arrow-up active':'arrow-up'"></span>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="data.length==0">
        <td [innerHTML]="configs.data_loading_text" [attr.colspan]="configs.columns.length + 1" style="text-align: center"></td>
      </tr>
      <tr *ngFor="let data of processed_data" [ngClass]="!data.parent?'child':'parent'">
        <td *ngIf="!expand_tracker[data.parent_id] && data.parent" (click)="expandRow(data.parent_id, data)"  
            class="clear-right-border">
            <i class="{{this.configs.add_class}}" aria-hidden="true"></i>
            <span class="parent_container">{{data.parent_id}}</span>
        </td>
        <td *ngIf="expand_tracker[data.parent_id] && data.parent" (click)="collapseRow(data.parent_id, data)"  
          class="clear-right-border">
            <i class="{{this.configs.minus_class}}" aria-hidden="true"></i>
            <span class="parent_container">{{data.parent_id}}</span>
        </td>
        <ng-container *ngIf="data.parent">
          <td *ngFor="let column of columns">
              <span [innerHTML]="column.group_aggregator ? column.group_aggregator(group_by_keys[data.parent_id]) : ''"></span>
          </td>
        </ng-container>
        <ng-container *ngIf="expand_tracker[data.parent_id] && !data.parent">
          <td class="clear-right-border"></td>
          <td class="clear-left-border" *ngFor="let column of columns" (click)="onCellClick(data)">
              <span [innerHTML]="column.renderer ? column.renderer(data[column.name], data) : data[column.name]"></span>
          </td>
        </ng-container>
        
      </tr>
    </tbody>   
    
  </table>
  